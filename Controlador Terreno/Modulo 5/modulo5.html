<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MÃ³dulo 5: GestiÃ³n de Incidentes y Emergencias | Controlador de Terreno</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;800&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #FF6B35; --secondary: #004E89; --accent: #F7B801;
            --dark-bg: #0A0E27; --card-bg: #1A1F3A; --sidebar-bg: #141829;
            --text-primary: #EAEAEA; --text-secondary: #B0B3C1;
            --success: #00D9A5; --warning: #FFC107; --danger: #FF5252; --info: #42A5F5;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #0f1123 100%);
            color: var(--text-primary); overflow-x: hidden; line-height: 1.6;
        }
        
        .header {
            position: fixed; top: 0; left: 0; right: 0; height: 80px;
            background: rgba(20, 24, 41, 0.95); backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 107, 53, 0.2);
            display: flex; align-items: center; padding: 0 40px; z-index: 1000;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }
        
        .header-logo { height: 50px; margin-right: 30px; }
        .header-title { flex: 1; }
        .header-title h1 { font-family: 'Exo 2', sans-serif; font-size: 24px; font-weight: 700; color: var(--primary); margin: 0; letter-spacing: -0.5px; }
        .header-title p { font-size: 13px; color: var(--text-secondary); margin: 2px 0 0 0; }
        .header-progress { display: flex; align-items: center; gap: 15px; }
        
        .progress-circle { position: relative; width: 50px; height: 50px; }
        .progress-circle svg { transform: rotate(-90deg); }
        .progress-circle circle { fill: none; stroke-width: 4; }
        .progress-circle .bg-circle { stroke: rgba(255, 107, 53, 0.2); }
        .progress-circle .progress-ring { stroke: var(--primary); stroke-linecap: round; transition: stroke-dashoffset 0.5s ease; }
        .progress-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 12px; font-weight: 700; color: var(--primary); }
        
        .container { display: flex; margin-top: 80px; height: calc(100vh - 80px); }
        
        .sidebar {
            width: 280px; background: var(--sidebar-bg);
            border-right: 1px solid rgba(255, 107, 53, 0.15);
            overflow-y: auto; position: fixed; left: 0; top: 80px; bottom: 0; padding: 30px 0;
        }
        
        .sidebar::-webkit-scrollbar { width: 6px; }
        .sidebar::-webkit-scrollbar-track { background: transparent; }
        .sidebar::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 3px; }
        
        .nav-item {
            padding: 16px 30px; display: flex; align-items: center; gap: 15px;
            cursor: pointer; transition: all 0.3s ease; border-left: 3px solid transparent; position: relative;
        }
        
        .nav-item:hover { background: rgba(255, 107, 53, 0.1); border-left-color: var(--primary); }
        .nav-item.active { background: rgba(255, 107, 53, 0.15); border-left-color: var(--primary); }
        .nav-item.active::before {
            content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 3px;
            background: var(--primary); box-shadow: 0 0 20px var(--primary);
        }
        
        .nav-icon { font-size: 24px; width: 24px; text-align: center; }
        .nav-text { flex: 1; }
        .nav-text h3 { font-size: 14px; font-weight: 600; margin-bottom: 2px; }
        .nav-text p { font-size: 11px; color: var(--text-secondary); }
        
        .nav-check {
            width: 20px; height: 20px; border: 2px solid var(--text-secondary);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 12px; transition: all 0.3s ease;
        }
        
        .nav-item.completed .nav-check { background: var(--success); border-color: var(--success); }
        
        .main-content {
            margin-left: 280px; flex: 1; padding: 40px 60px 100px;
            overflow-y: auto; scroll-behavior: smooth;
        }
        
        .main-content::-webkit-scrollbar { width: 8px; }
        .main-content::-webkit-scrollbar-track { background: transparent; }
        .main-content::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 4px; }
        
        .content-section { display: none; animation: fadeIn 0.5s ease; }
        .content-section.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .card {
            background: var(--card-bg); border-radius: 16px; padding: 30px; margin-bottom: 30px;
            border: 1px solid rgba(255, 107, 53, 0.1); transition: all 0.3s ease;
        }
        
        .card:hover {
            border-color: rgba(255, 107, 53, 0.3);
            box-shadow: 0 8px 40px rgba(255, 107, 53, 0.15);
            transform: translateY(-2px);
        }
        
        .card h2 { font-family: 'Exo 2', sans-serif; font-size: 28px; color: var(--primary); margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }
        .card h3 { font-family: 'Exo 2', sans-serif; font-size: 22px; color: var(--accent); margin: 30px 0 15px; }
        .card h4 { font-size: 18px; color: var(--info); margin: 20px 0 12px; }
        .card p { margin-bottom: 15px; color: var(--text-secondary); line-height: 1.8; }
        .card strong { color: var(--text-primary); }
        
        .alert {
            padding: 20px 25px; border-radius: 12px; margin: 20px 0;
            border-left: 4px solid; display: flex; align-items: flex-start; gap: 15px;
        }
        
        .alert-icon { font-size: 24px; flex-shrink: 0; }
        .alert-critical { background: rgba(255, 82, 82, 0.1); border-color: var(--danger); }
        .alert-warning { background: rgba(255, 193, 7, 0.1); border-color: var(--warning); }
        .alert-info { background: rgba(66, 165, 245, 0.1); border-color: var(--info); }
        .alert-success { background: rgba(0, 217, 165, 0.1); border-color: var(--success); }
        
        .code-block {
            background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 12px; padding: 20px; margin: 20px 0;
            font-family: 'JetBrains Mono', monospace; font-size: 13px;
            line-height: 1.8; overflow-x: auto; color: #A8E6CF;
        }
        
        .accordion { margin: 20px 0; }
        .accordion-item {
            background: rgba(26, 31, 58, 0.6); border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 12px; margin-bottom: 15px; overflow: hidden; transition: all 0.3s ease;
        }
        
        .accordion-header {
            padding: 20px 25px; cursor: pointer; display: flex;
            align-items: center; justify-content: space-between; user-select: none; transition: all 0.3s ease;
        }
        
        .accordion-header:hover { background: rgba(255, 107, 53, 0.1); }
        .accordion-title { display: flex; align-items: center; gap: 12px; font-size: 16px; font-weight: 600; }
        .accordion-icon { font-size: 20px; transition: transform 0.3s ease; }
        .accordion-item.active .accordion-icon { transform: rotate(180deg); }
        
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease; }
        .accordion-item.active .accordion-content { max-height: 5000px; }
        .accordion-body { padding: 0 25px 25px; }
        
        ul, ol { margin: 15px 0 15px 25px; color: var(--text-secondary); }
        li { margin: 8px 0; }
        
        table { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 14px; }
        th, td { padding: 15px; text-align: left; border-bottom: 1px solid rgba(255, 107, 53, 0.1); }
        th { background: rgba(255, 107, 53, 0.1); color: var(--primary); font-weight: 600; }
        
        .badge {
            display: inline-block; padding: 4px 12px; border-radius: 20px;
            font-size: 12px; font-weight: 600; margin: 0 5px;
        }
        
        .badge-critical { background: var(--danger); color: white; }
        .badge-high { background: var(--warning); color: #000; }
        .badge-medium { background: var(--info); color: white; }
        .badge-low { background: var(--success); color: white; }
        
        .eval-timer {
            display: flex; align-items: center; gap: 10px;
            background: rgba(0, 0, 0, 0.3); padding: 10px 20px;
            border-radius: 12px; font-size: 24px; font-weight: 700;
        }
        
        .eval-progress-bar {
            width: 100%; height: 8px; background: rgba(255, 255, 255, 0.2);
            border-radius: 4px; overflow: hidden; margin-top: 10px;
        }
        
        .eval-progress-fill { height: 100%; background: var(--success); transition: width 0.3s ease; }
        
        .question-card {
            background: var(--card-bg); border: 2px solid rgba(255, 107, 53, 0.2);
            border-radius: 16px; padding: 30px; margin-bottom: 20px;
        }
        
        .option-btn {
            width: 100%; text-align: left; padding: 16px 20px; margin: 10px 0;
            background: var(--sidebar-bg); border: 2px solid rgba(255, 107, 53, 0.2);
            border-radius: 12px; color: var(--text-primary); cursor: pointer;
            transition: all 0.3s ease; font-size: 16px; font-family: 'Inter', sans-serif;
        }
        
        .option-btn:hover { border-color: var(--primary); background: rgba(255, 107, 53, 0.1); }
        .option-btn.selected { border-color: var(--primary); background: rgba(255, 107, 53, 0.2); }
        
        textarea {
            width: 100%; min-height: 150px; padding: 15px;
            background: var(--sidebar-bg); border: 2px solid rgba(255, 107, 53, 0.2);
            border-radius: 12px; color: var(--text-primary);
            font-family: 'Inter', sans-serif; font-size: 14px; resize: vertical;
        }
        
        textarea:focus { outline: none; border-color: var(--primary); }
        
        .btn-primary {
            padding: 16px 32px; background: linear-gradient(135deg, var(--primary), #c94d29);
            color: white; border: none; border-radius: 12px; font-size: 16px;
            font-weight: 600; cursor: pointer; transition: all 0.3s ease;
        }
        
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(255, 107, 53, 0.4); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        
        .btn-secondary {
            padding: 16px 32px; background: var(--secondary); color: white;
            border: none; border-radius: 12px; font-size: 16px; font-weight: 600;
            cursor: pointer; transition: all 0.3s ease;
        }
        
        .btn-secondary:hover { background: #003a6f; }
        
        .score-display { font-size: 80px; font-weight: 800; color: var(--primary); margin: 20px 0; }
        
        .pdf-download {
            position: fixed; bottom: 40px; right: 40px;
            background: linear-gradient(135deg, var(--primary), #ff8c5a);
            color: white; border: none; border-radius: 50px; padding: 18px 35px;
            font-size: 16px; font-weight: 700; cursor: pointer;
            box-shadow: 0 8px 30px rgba(255, 107, 53, 0.4);
            display: flex; align-items: center; gap: 12px;
            transition: all 0.3s ease; z-index: 999; font-family: 'Inter', sans-serif;
        }
        
        .pdf-download:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(255, 107, 53, 0.6);
        }
        
        .pdf-download.generating { background: var(--success); pointer-events: none; }
        
        .char-counter {
            text-align: right; font-size: 12px;
            color: var(--text-secondary); margin-top: 5px;
        }
        
        @media (max-width: 1024px) {
            .sidebar { width: 240px; }
            .main-content { margin-left: 240px; padding: 30px 40px 100px; }
        }
        
        @media (max-width: 768px) {
            .header { padding: 0 20px; }
            .header-title h1 { font-size: 18px; }
            .header-title p { display: none; }
            .sidebar { width: 100%; position: relative; top: 0; height: auto; border-right: none; border-bottom: 1px solid rgba(255, 107, 53, 0.15); }
            .main-content { margin-left: 0; padding: 20px; }
            .pdf-download { bottom: 20px; right: 20px; padding: 15px 25px; font-size: 14px; }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-logo" style="width: 50px; height: 50px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 800;">M5</div>
        <div class="header-title">
            <h1>MÃ³dulo 5: GestiÃ³n de Incidentes y Emergencias</h1>
            <p>Sistema de Camiones AutÃ³nomos Mineros - Controlador de Terreno</p>
        </div>
        <div class="header-progress">
            <div class="progress-circle">
                <svg width="50" height="50">
                    <circle class="bg-circle" cx="25" cy="25" r="20"></circle>
                    <circle class="progress-ring" cx="25" cy="25" r="20" stroke-dasharray="125.6" stroke-dashoffset="125.6"></circle>
                </svg>
                <div class="progress-text">0%</div>
            </div>
        </div>
    </header>

    <div class="container">
        <aside class="sidebar">
            <nav>
                <div class="nav-item active" data-section="intro">
                    <span class="nav-icon">ğŸ“š</span>
                    <div class="nav-text">
                        <h3>IntroducciÃ³n</h3>
                        <p>Bienvenida al mÃ³dulo</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
                
                <div class="nav-item" data-section="fundamentals">
                    <span class="nav-icon">ğŸ§ </span>
                    <div class="nav-text">
                        <h3>Fundamentos</h3>
                        <p>Â¿Por quÃ© fallan?</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
                
                <div class="nav-item" data-section="fallas">
                    <span class="nav-icon">âš ï¸</span>
                    <div class="nav-text">
                        <h3>Fallas CrÃ­ticas</h3>
                        <p>8 tipos principales</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
                
                <div class="nav-item" data-section="protocolos">
                    <span class="nav-icon">ğŸ¯</span>
                    <div class="nav-text">
                        <h3>Protocolos</h3>
                        <p>Toma de decisiones</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
                
                <div class="nav-item" data-section="comunicacion">
                    <span class="nav-icon">ğŸ“</span>
                    <div class="nav-text">
                        <h3>ComunicaciÃ³n</h3>
                        <p>GestiÃ³n en crisis</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
                
                <div class="nav-item" data-section="documentacion">
                    <span class="nav-icon">ğŸ“</span>
                    <div class="nav-text">
                        <h3>DocumentaciÃ³n</h3>
                        <p>Registro forense</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
                
                <div class="nav-item" data-section="evaluacion">
                    <span class="nav-icon">ğŸ†</span>
                    <div class="nav-text">
                        <h3>EvaluaciÃ³n</h3>
                        <p>Prueba final</p>
                    </div>
                    <div class="nav-check"></div>
                </div>
            </nav>
        </aside>

        <main class="main-content" id="mainContent">
            <!-- SECTION 1: INTRODUCCIÃ“N -->
            <section class="content-section active" id="intro">
                <div class="card">
                    <h2>ğŸ¯ Bienvenida al MÃ³dulo 5</h2>
                    <p><strong>Hola, futuro Controlador de Terreno:</strong></p>
                    <p>Este mÃ³dulo es el <strong>corazÃ³n operacional</strong> de tu formaciÃ³n. AquÃ­ es donde tu entrenamiento se convierte en acciÃ³n real.</p>
                    <p>En una mina autÃ³noma, <strong>tÃº eres la Ãºltima lÃ­nea de defensa</strong> cuando algo no sale segÃºn lo planeado. No importa quÃ© tan avanzada sea la tecnologÃ­a: siempre habrÃ¡ momentos donde el sistema autÃ³nomo necesita de tu criterio, tu rapidez mental y tu capacidad de resolver problemas bajo presiÃ³n.</p>
                    
                    <div class="alert alert-info">
                        <span class="alert-icon">â„¹ï¸</span>
                        <div>
                            <strong>Dato clave:</strong> Los sistemas autÃ³nomos como Komatsu FrontRunner han transportado mÃ¡s de 7.5 mil millones de toneladas mÃ©tricas de material con cero incidentes de seguridad atribuibles a la autonomÃ­a, pero esto se logra gracias a controladores competentes que saben anticipar, identificar y resolver situaciones crÃ­ticas.
                        </div>
                    </div>
                    
                    <h3>Â¿QuÃ© aprenderÃ¡s en este mÃ³dulo?</h3>
                    <ul>
                        <li>âœ… Identificar y clasificar incidentes en tiempo real</li>
                        <li>âœ… Ejecutar protocolos de emergencia de manera precisa</li>
                        <li>âœ… Tomar decisiones correctas bajo presiÃ³n extrema</li>
                        <li>âœ… Comunicarte efectivamente durante crisis operacionales</li>
                        <li>âœ… Analizar casos reales de fallas y aprender de ellos</li>
                    </ul>
                </div>
                
                <div class="card">
                    <h2>ğŸ“‹ Objetivos de Aprendizaje</h2>
                    <p>Al finalizar este mÃ³dulo, serÃ¡s capaz de:</p>
                    
                    <table>
                        <thead>
                            <tr>
                                <th>Objetivo</th>
                                <th>Nivel de Dominio</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1. Reconocer los 8 tipos de fallas crÃ­ticas en sistemas autÃ³nomos</td>
                                <td><span class="badge badge-critical">IdentificaciÃ³n inmediata</span></td>
                            </tr>
                            <tr>
                                <td>2. Ejecutar el protocolo DETENTE-EVALÃšA-ACTÃšA en menos de 30 segundos</td>
                                <td><span class="badge badge-critical">Respuesta automÃ¡tica</span></td>
                            </tr>
                            <tr>
                                <td>3. Diagnosticar la causa raÃ­z usando Ã¡rbol de decisiones</td>
                                <td><span class="badge badge-high">AnÃ¡lisis tÃ©cnico</span></td>
                            </tr>
                            <tr>
                                <td>4. Comunicar incidentes usando fraseologÃ­a estandarizada</td>
                                <td><span class="badge badge-medium">Claridad operacional</span></td>
                            </tr>
                            <tr>
                                <td>5. Escalar problemas segÃºn matriz de escalamiento</td>
                                <td><span class="badge badge-medium">Juicio profesional</span></td>
                            </tr>
                            <tr>
                                <td>6. Documentar incidentes con precisiÃ³n forense</td>
                                <td><span class="badge badge-low">Registro completo</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- SECTION 2: FUNDAMENTOS -->
            <section class="content-section" id="fundamentals">
                <div class="card">
                    <h2>ğŸ§  Fundamentos - Â¿Por quÃ© fallan los sistemas autÃ³nomos?</h2>
                    
                    <h3>1.1 La Realidad de la AutonomÃ­a</h3>
                    <p>Contrario a lo que muchos creen, <strong>un camiÃ³n autÃ³nomo NO es infalible</strong>. Es una mÃ¡quina extraordinariamente capaz, pero opera en uno de los entornos mÃ¡s hostiles del planeta: una mina a cielo abierto.</p>
                    
                    <div class="alert alert-info">
                        <span class="alert-icon">ğŸ”</span>
                        <div>
                            <strong>PiÃ©nsalo asÃ­:</strong> Un camiÃ³n Komatsu 930E autÃ³nomo tiene GPS de doble frecuencia, LiDAR que escanea 360Â° cada 0.1 segundos, conexiÃ³n WiFi/LTE constante, sistema inercial de respaldo y 8-12 cÃ¡maras de visiÃ³n. Sin embargo, polvo, clima extremo e interferencias ambientales en los sensores son factores comunes en incidentes.
                        </div>
                    </div>
                    
                    <h3>1.2 Los 3 Dominios de Falla</h3>
                    <p>Todo incidente en sistemas autÃ³nomos cae en una de estas 3 categorÃ­as:</p>
                    
                    <div class="accordion">
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <div class="accordion-title">
                                    <span>ğŸ”´</span>
                                    <strong>DOMINIO 1: FALLAS DE PERCEPCIÃ“N</strong>
                                </div>
                                <span class="accordion-icon">â–¼</span>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p><strong>El camiÃ³n "ve" mal o no ve nada.</strong></p>
                                    <p><strong>Ejemplos:</strong></p>
                                    <ul>
                                        <li>Sensor LiDAR cubierto de barro â†’ el camiÃ³n detecta obstÃ¡culos fantasma</li>
                                        <li>PÃ©rdida de seÃ±al GPS en pozos profundos â†’ el camiÃ³n no sabe dÃ³nde estÃ¡</li>
                                        <li>Polvo en suspensiÃ³n denso â†’ las cÃ¡maras no distinguen obstÃ¡culos reales</li>
                                        <li>Neblina o lluvia intensa que afecta visiÃ³n de sensores Ã³pticos</li>
                                    </ul>
                                    <p><strong>ğŸ¯ Tu rol:</strong> Identificar si el problema es de percepciÃ³n y activar modo degradado</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <div class="accordion-title">
                                    <span>ğŸŸ¡</span>
                                    <strong>DOMINIO 2: FALLAS DE COMUNICACIÃ“N</strong>
                                </div>
                                <span class="accordion-icon">â–¼</span>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p><strong>El camiÃ³n no puede "hablar" con el sistema de control.</strong></p>
                                    <p><strong>Ejemplos:</strong></p>
                                    <ul>
                                        <li>Corte temporal de WiFi/LTE por interferencia electromagnÃ©tica</li>
                                        <li>PÃ©rdida de comunicaciÃ³n que llevÃ³ a un camiÃ³n Caterpillar autÃ³nomo a retroceder hacia una excavadora en una mina BHP en Queensland (2023)</li>
                                        <li>Interferencia por explosivos o tormentas elÃ©ctricas</li>
                                        <li>Falla en antenas de comunicaciÃ³n</li>
                                    </ul>
                                    <p><strong>ğŸ¯ Tu rol:</strong> Aplicar protocolo de pÃ©rdida de comunicaciÃ³n y prevenir colisiones</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <div class="accordion-title">
                                    <span>ğŸŸ </span>
                                    <strong>DOMINIO 3: FALLAS MECÃNICAS/ELÃ‰CTRICAS</strong>
                                </div>
                                <span class="accordion-icon">â–¼</span>
                            </div>
                            <div class="accordion-content">
                                <div class="accordion-body">
                                    <p><strong>El camiÃ³n tiene un problema fÃ­sico.</strong></p>
                                    <p><strong>Ejemplos:</strong></p>
                                    <ul>
                                        <li>PÃ©rdida de tracciÃ³n por sobre-riego de camino</li>
                                        <li>NeumÃ¡tico pinchado detectado por TPMS (Tire Pressure Monitoring System)</li>
                                        <li>Falla hidrÃ¡ulica en sistema de levante</li>
                                        <li>Sistema de frenos comprometido</li>
                                        <li>Sobrecalentamiento de motor o sistemas crÃ­ticos</li>
                                    </ul>
                                    <p><strong>ğŸ¯ Tu rol:</strong> Detener unidad, aislar Ã¡rea y coordinar con mantenimiento</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <h3>1.3 Modelo Mental del Controlador</h3>
                    <p>Como controlador, debes desarrollar un <strong>modelo mental de 360Â°</strong>:</p>
                    <ul>
                        <li><strong>VisiÃ³n sistÃ©mica:</strong> Ver mÃ¡s allÃ¡ del incidente individual</li>
                        <li><strong>AnticipaciÃ³n:</strong> Predecir cascadas de fallas</li>
                        <li><strong>PriorizaciÃ³n:</strong> Seguridad > Activos > ProducciÃ³n</li>
                        <li><strong>ComunicaciÃ³n clara:</strong> Transmitir informaciÃ³n crÃ­tica sin ambigÃ¼edad</li>
                    </ul>
                </div>
            </section>

            <!-- SECTION 3: FALLAS CRÃTICAS (COMPLETAS) -->
            <section class="content-section" id="fallas">
                <div class="card">
                    <h2>âš ï¸ TaxonomÃ­a de las 8 Fallas CrÃ­ticas</h2>
                    <p>Ahora profundizaremos en las <strong>8 fallas crÃ­ticas</strong> que TODO controlador debe dominar.</p>
                    
                    <h3>FALLA TIPO 1: PÃ©rdida de Posicionamiento GPS/GNSS ğŸ›°ï¸âŒ</h3>
                    
                    <h4>Â¿QuÃ© sucede?</h4>
                    <p>La pÃ©rdida completa de ubicaciÃ³n GPS resulta en que los camiones automÃ¡ticamente se detengan hasta que la posiciÃ³n pueda ser restablecida.</p>
                    
                    <h4>Causas comunes:</h4>
                    <ul>
                        <li><strong>GeogrÃ¡ficas:</strong> Pozos profundos que bloquean seÃ±al satelital</li>
                        <li><strong>AtmosfÃ©ricas:</strong> Tormentas elÃ©ctricas, ionizaciÃ³n atmosfÃ©rica</li>
                        <li><strong>TÃ©cnicas:</strong> Antena GPS daÃ±ada, conectores corroÃ­dos</li>
                        <li><strong>Interferencia:</strong> Detonaciones cercanas (explosivos)</li>
                    </ul>
                    
                    <h4>SÃ­ntomas en la consola:</h4>
                    <div class="code-block">âš ï¸ ALERTA GNSS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Truck ID: 207
Status: GPS DEGRADED
Satellites: 3/12
Accuracy: >15m
Position: LAST KNOWN
Action: AUTO-STOP INITIATED
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                    
                    <div class="alert alert-critical">
                        <span class="alert-icon">ğŸ¯</span>
                        <div>
                            <strong>PROTOCOLO DE RESPUESTA:</strong>
                            <p><strong>PASO 1 - VerificaciÃ³n (0-30 seg)</strong></p>
                            <ul>
                                <li>â–¡ Verificar si es unidad individual o mÃºltiples unidades</li>
                                <li>â–¡ Consultar telemetrÃ­a: Â¿cuÃ¡ntos satÃ©lites detecta?</li>
                                <li>â–¡ Revisar historial: Â¿pÃ©rdida abrupta o gradual?</li>
                                <li>â–¡ Check weather: Â¿tormenta elÃ©ctrica en zona?</li>
                            </ul>
                            <p><strong>PASO 2 - DecisiÃ³n (30-60 seg)</strong></p>
                            <ul>
                                <li>â–¡ Si afecta mÃºltiples unidades â†’ DETENER FLOTA</li>
                                <li>â–¡ Si es unidad Ãºnica â†’ Aislar camiÃ³n en mapa</li>
                                <li>â–¡ Activar luces de emergencia del vehÃ­culo</li>
                            </ul>
                            <p><strong>PASO 3 - ComunicaciÃ³n (60-90 seg)</strong></p>
                            <ul>
                                <li>â–¡ Reportar a supervisor: "GPS LOSS - Truck 207"</li>
                                <li>â–¡ Alertar a equipos manuales cercanos</li>
                                <li>â–¡ Coordinar con IT/Soporte tÃ©cnico</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 2: Falla de ComunicaciÃ³n (COMM LOSS) ğŸ“¡âŒ</h3>
                    <p>Esta es <strong>LA falla mÃ¡s peligrosa</strong> porque el camiÃ³n queda "sordo y mudo".</p>
                    
                    <div class="alert alert-warning">
                        <span class="alert-icon">âš ï¸</span>
                        <div>
                            <strong>Incidente Real - BHP Goonyella (Australia, 2023):</strong>
                            <p>Una pÃ©rdida de comunicaciÃ³n llevÃ³ a que un camiÃ³n Caterpillar operando en modo autÃ³nomo comenzara a retroceder hacia una excavadora despuÃ©s de que la comunicaciÃ³n se restaurÃ³, resultando en una colisiÃ³n menor. Afortunadamente no hubo heridos, pero se perdieron 2 dÃ­as de producciÃ³n.</p>
                            <p><strong>LecciÃ³n crÃ­tica:</strong> Al restaurar comunicaciÃ³n, el camiÃ³n debe entrar en HOLD automÃ¡tico y esperar autorizaciÃ³n del controlador.</p>
                        </div>
                    </div>
                    
                    <h4>Protocolo COMM LOSS:</h4>
                    <ol>
                        <li><strong>0-15 seg:</strong> Verificar si es pÃ©rdida total o intermitente</li>
                        <li><strong>15-30 seg:</strong> Marcar zona roja en mapa, alertar equipos cercanos</li>
                        <li><strong>30-60 seg:</strong> Si no recupera, enviar vehÃ­culo de inspecciÃ³n</li>
                        <li><strong>60-120 seg:</strong> Preparar plan de recuperaciÃ³n manual</li>
                    </ol>
                    
                    <div class="code-block">ğŸ”´ COMM LOSS PROTOCOL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. STOP all vehicles within 200m
2. MARK red zone on digital map
3. ALERT manual operators via radio
4. DISPATCH inspection vehicle
5. HOLD operations until comm restored
6. VERIFY safe state before resume
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 3: Falla del Sistema de DetecciÃ³n de ObstÃ¡culos ğŸ‘ï¸âŒ</h3>
                    
                    <p>El camiÃ³n pierde su capacidad de "ver" obstÃ¡culos en su trayectoria.</p>
                    
                    <h4>Causas:</h4>
                    <ul>
                        <li>Sensores LiDAR/radar cubiertos por polvo, barro o hielo</li>
                        <li>Falla en procesamiento de datos de sensores</li>
                        <li>CÃ¡maras desalineadas por vibraciones</li>
                    </ul>
                    
                    <h4>Tu respuesta:</h4>
                    <div class="alert alert-critical">
                        <span class="alert-icon">ğŸš¨</span>
                        <div>
                            <strong>ACCIÃ“N INMEDIATA:</strong>
                            <ul>
                                <li>DETENER vehÃ­culo inmediatamente</li>
                                <li>NO permitir reinicio hasta inspecciÃ³n fÃ­sica</li>
                                <li>Clasificar como PRIORIDAD CRÃTICA</li>
                                <li>Aislar zona de 50 metros alrededor</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 4: Falla del Sistema de Frenos ğŸ›‘âŒ</h3>
                    
                    <p>Comprometimiento del sistema de frenado - <strong>EMERGENCIA ABSOLUTA</strong>.</p>
                    
                    <h4>Indicadores:</h4>
                    <ul>
                        <li>PresiÃ³n hidrÃ¡ulica bajo 50% del nominal</li>
                        <li>CÃ³digos de error E-BRAKE-01 a E-BRAKE-04</li>
                        <li>Temperatura excesiva en sistema de frenos</li>
                    </ul>
                    
                    <div class="code-block">ğŸš¨ BRAKE FAILURE - CRITICAL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
IMMEDIATE ACTIONS:
1. ACTIVATE parking brake
2. If on slope: direct to flat area
3. EVACUATE 100m radius
4. STOP all traffic in sector
5. NOTIFY maintenance URGENT
6. PREPARE towing equipment
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                    
                    <div class="alert alert-critical">
                        <span class="alert-icon">âš ï¸</span>
                        <div>
                            <strong>Nunca permitas que un camiÃ³n con falla de frenos:</strong>
                            <ul>
                                <li>Circule en pendientes mayores a 3%</li>
                                <li>Opere cerca de bordes o botaderos</li>
                                <li>Transporte carga hasta reparaciÃ³n completa</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 5: Sobrecalentamiento del Motor/Sistemas ğŸŒ¡ï¸ğŸ”¥</h3>
                    
                    <h4>Zonas crÃ­ticas de temperatura:</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Sistema</th>
                                <th>Temp. Normal</th>
                                <th>Temp. CrÃ­tica</th>
                                <th>AcciÃ³n</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Motor</td>
                                <td>85-95Â°C</td>
                                <td>&gt;105Â°C</td>
                                <td>DETENER INMEDIATO</td>
                            </tr>
                            <tr>
                                <td>Sistema hidrÃ¡ulico</td>
                                <td>60-75Â°C</td>
                                <td>&gt;90Â°C</td>
                                <td>DETENER EN 2 MIN</td>
                            </tr>
                            <tr>
                                <td>TransmisiÃ³n</td>
                                <td>75-85Â°C</td>
                                <td>&gt;100Â°C</td>
                                <td>REDUCIR CARGA</td>
                            </tr>
                            <tr>
                                <td>Frenos</td>
                                <td>150-200Â°C</td>
                                <td>&gt;280Â°C</td>
                                <td>EMERGENCIA</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p><strong>Protocolo de sobrecalentamiento:</strong></p>
                    <ol>
                        <li>Evaluar severidad segÃºn tabla</li>
                        <li>Si crÃ­tico: detenciÃ³n inmediata, activar supresiÃ³n de fuego</li>
                        <li>Si elevado: dirigir a zona plana, apagar motor, enfriar</li>
                        <li>Monitorear temperatura cada 5 minutos</li>
                        <li>NO reiniciar hasta temperatura normal</li>
                    </ol>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 6: PÃ©rdida de PresiÃ³n en NeumÃ¡ticos ğŸ›ğŸ’¨</h3>
                    
                    <h4>Sistema TPMS (Tire Pressure Monitoring System):</h4>
                    <p>Los camiones autÃ³nomos monitorean presiÃ³n de cada neumÃ¡tico en tiempo real.</p>
                    
                    <h4>Niveles de alerta:</h4>
                    <ul>
                        <li><span class="badge badge-low">ADVISORY</span> -10% presiÃ³n nominal</li>
                        <li><span class="badge badge-medium">WARNING</span> -20% presiÃ³n nominal</li>
                        <li><span class="badge badge-high">CRITICAL</span> -30% presiÃ³n nominal</li>
                        <li><span class="badge badge-critical">EMERGENCY</span> PÃ©rdida rÃ¡pida de presiÃ³n</li>
                    </ul>
                    
                    <div class="alert alert-critical">
                        <span class="alert-icon">ğŸš¨</span>
                        <div>
                            <strong>PROTOCOLO NEUMÃTICO CRÃTICO:</strong>
                            <p>Un neumÃ¡tico con pÃ©rdida crÃ­tica en un camiÃ³n de 385 toneladas puede causar <strong>volcamiento</strong>. Tu respuesta debe ser:</p>
                            <ol>
                                <li>DETENER vehÃ­culo INMEDIATAMENTE (no importa la ubicaciÃ³n)</li>
                                <li>Activar freno de estacionamiento</li>
                                <li>Evacuar Ã¡rea 50m (riesgo de explosiÃ³n de neumÃ¡tico)</li>
                                <li>Solicitar soporte de mantenimiento con equipo especializado</li>
                                <li>Documentar condiciones: carga, ubicaciÃ³n, estado del camino</li>
                            </ol>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 7: Falla en Sistema de IluminaciÃ³n Nocturna ğŸ’¡âŒ</h3>
                    
                    <p>En operaciones 24/7, la iluminaciÃ³n es un sistema crÃ­tico de seguridad.</p>
                    
                    <h4>Componentes del sistema:</h4>
                    <ul>
                        <li>Luces principales (frontales y traseras)</li>
                        <li>Luces de trabajo (360Â° de iluminaciÃ³n)</li>
                        <li>Luces de advertencia (strobe lights)</li>
                        <li>IluminaciÃ³n de zona de carga</li>
                    </ul>
                    
                    <h4>Tu decisiÃ³n:</h4>
                    <div class="alert alert-warning">
                        <span class="alert-icon">âš ï¸</span>
                        <div>
                            <p><strong>Regla absoluta:</strong> NO se permite operaciÃ³n nocturna sin sistema de iluminaciÃ³n completo.</p>
                            <p><strong>AcciÃ³n:</strong></p>
                            <ul>
                                <li>Si falla parcial (1-2 luces): Reducir velocidad 30%, completar ciclo, reparar</li>
                                <li>Si falla crÃ­tica (&gt;50% luces): DETENER, no operar hasta reparaciÃ³n</li>
                                <li>Si falla total: EMERGENCIA - escort manual al taller</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>FALLA TIPO 8: Error en PlanificaciÃ³n de Ruta (Path Planning) ğŸ—ºï¸âŒ</h3>
                    
                    <p>El sistema no puede calcular una ruta segura hacia el destino.</p>
                    
                    <h4>Causas:</h4>
                    <ul>
                        <li>Cambios no actualizados en el mapa digital (nuevo botadero, nueva rampa)</li>
                        <li>ObstÃ¡culos no registrados bloqueando rutas</li>
                        <li>Conflicto entre mÃºltiples camiones en intersecciÃ³n</li>
                        <li>Zona declarada como no-transitable por otro incidente</li>
                    </ul>
                    
                    <h4>SÃ­ntomas:</h4>
                    <div class="code-block">âš ï¸ PATH PLANNING ERROR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Truck ID: 189
Current: Km 5.2 Norte
Destination: Chancadora
Error: NO VALID PATH FOUND
Retry attempts: 7/10
Status: HOLDING POSITION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                    
                    <h4>Tu respuesta:</h4>
                    <ol>
                        <li><strong>DiagnÃ³stico rÃ¡pido:</strong> Â¿El mapa estÃ¡ actualizado?</li>
                        <li><strong>VerificaciÃ³n visual:</strong> Revisar cÃ¡maras de la zona</li>
                        <li><strong>Opciones:</strong>
                            <ul>
                                <li>Actualizar mapa si hay cambios recientes</li>
                                <li>Asignar ruta alternativa manualmente</li>
                                <li>Si no hay soluciÃ³n: control manual remoto</li>
                            </ul>
                        </li>
                        <li><strong>PrevenciÃ³n:</strong> Reportar a equipo de mapeo para actualizaciÃ³n</li>
                    </ol>
                </div>
            </section>

            <!-- SECTION 4: PROTOCOLOS -->
            <section class="content-section" id="protocolos">
                <div class="card">
                    <h2>ğŸ¯ Protocolos de Toma de Decisiones</h2>
                    
                    <h3>El Marco Mental: DETENTE-EVALÃšA-ACTÃšA</h3>
                    <p>Este es <strong>TU MANTRA</strong> en cada incidente. Debe volverse un reflejo automÃ¡tico.</p>
                    
                    <div class="code-block">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  D  â”‚ DETENTE (3 segundos)                   â”‚
â”‚     â”‚ â€¢ Respira profundo                     â”‚
â”‚     â”‚ â€¢ No reacciones por impulso            â”‚
â”‚     â”‚ â€¢ Lee la situaciÃ³n completa            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  E  â”‚ EVALÃšA (15-30 segundos)                â”‚
â”‚     â”‚ â€¢ Â¿Hay riesgo inmediato de vida?       â”‚
â”‚     â”‚ â€¢ Â¿QuÃ© sistemas estÃ¡n afectados?       â”‚
â”‚     â”‚ â€¢ Â¿CuÃ¡l es el peor escenario posible?  â”‚
â”‚     â”‚ â€¢ Â¿QuÃ© recursos necesito?              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  A  â”‚ ACTÃšA (con decisiÃ³n)                   â”‚
â”‚     â”‚ â€¢ Ejecuta protocolo especÃ­fico         â”‚
â”‚     â”‚ â€¢ Comunica claramente                  â”‚
â”‚     â”‚ â€¢ Documenta cada paso                  â”‚
â”‚     â”‚ â€¢ Monitorea resultado                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
                    
                    <h3>Matriz de Severidad y Escalamiento</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Nivel</th>
                                <th>Criterio</th>
                                <th>Tiempo Resp.</th>
                                <th>Escalamiento</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge badge-low">BAJO</span></td>
                                <td>Sensor individual, sin impacto operacional</td>
                                <td>15-30 min</td>
                                <td>Mantenimiento rutinario</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-medium">MEDIO</span></td>
                                <td>Falla de comunicaciÃ³n temporal, recuperable</td>
                                <td>5-10 min</td>
                                <td>Supervisor de turno</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-high">ALTO</span></td>
                                <td>PÃ©rdida GPS mÃºltiple, falla mecÃ¡nica mayor</td>
                                <td>1-3 min</td>
                                <td>Gerente operaciones</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-critical">CRÃTICO</span></td>
                                <td>Personal en riesgo, falla de frenos, fuego</td>
                                <td>&lt; 30 seg</td>
                                <td>Gerente + Seguridad + Emergencias</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>Ãrbol de Decisiones - Incidente Detectado</h3>
                    <div class="code-block">â”Œâ”€ INCIDENTE DETECTADO â”€â”
â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    Â¿HAY RIESGO
    DE VIDA?
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
   SÃ         NO
    â”‚          â”‚
    â–¼          â–¼
 DETENER    Â¿SISTEMA
  TODO      CRÃTICO?
    â”‚          â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚    SÃ         NO
    â”‚     â”‚          â”‚
    â”‚     â–¼          â–¼
    â”‚  DETENER   Â¿PUEDE
    â”‚  UNIDAD    EMPEORAR?
    â”‚     â”‚          â”‚
    â”‚     â”‚     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚     â”‚    SÃ         NO
    â”‚     â”‚     â”‚          â”‚
    â”‚     â–¼     â–¼          â–¼
    â””â”€â”€â–º PROTOCOLO    MONITOREAR
         EMERGENCIA   Y PLANIFICAR</div>
                    
                    <h3>Los 4 Principios No Negociables</h3>
                    
                    <div class="alert alert-success">
                        <span class="alert-icon">ğŸ§ </span>
                        <div>
                            <strong>1. PIENSA antes de actuar</strong>
                            <p>Tres segundos de anÃ¡lisis pueden prevenir horas de consecuencias. EvalÃºa impacto, riesgos y alternativas.</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <span class="alert-icon">ğŸ“</span>
                        <div>
                            <strong>2. COMUNICA claramente</strong>
                            <p>Usa fraseologÃ­a estandarizada. Confirma que tu mensaje fue entendido. No asumas nada.</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-warning">
                        <span class="alert-icon">ğŸ“</span>
                        <div>
                            <strong>3. DOCUMENTA TODO</strong>
                            <p>Si no estÃ¡ documentado, no sucediÃ³. Cada acciÃ³n, cada decisiÃ³n, cada comunicaciÃ³n.</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-critical">
                        <span class="alert-icon">ğŸ¯</span>
                        <div>
                            <strong>4. PRIORIZA la vida sobre la producciÃ³n</strong>
                            <p>SIEMPRE. Sin excepciones. Un camiÃ³n detenido es un problema temporal. Una vida perdida es irreversible.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SECTION 5: COMUNICACIÃ“N -->
            <section class="content-section" id="comunicacion">
                <div class="card">
                    <h2>ğŸ“ ComunicaciÃ³n en Crisis</h2>
                    
                    <h3>FraseologÃ­a Estandarizada</h3>
                    <p>En una mina, <strong>la claridad salva vidas</strong>. Usa estas estructuras SIEMPRE.</p>
                    
                    <h4>Estructura de reporte de incidente:</h4>
                    <div class="code-block">"[TU POSICIÃ“N] a [DESTINATARIO],
reporto [TIPO DE FALLA] en [UNIDAD],
ubicaciÃ³n [POSICIÃ“N EXACTA],
estado [CONDICIÃ“N ACTUAL],
acciÃ³n [QUÃ‰ HICISTE],
requiero [QUÃ‰ NECESITAS],
over."</div>
                    
                    <div class="alert alert-success">
                        <span class="alert-icon">âœ…</span>
                        <div>
                            <strong>Ejemplo prÃ¡ctico correcto:</strong>
                            <p>"Control a Supervisor, reporto COMM LOSS en Truck 215, ubicaciÃ³n Km 7.3 Sector Norte, estado DESCONOCIDO Ãºltima comunicaciÃ³n hace 3 minutos, acciÃ³n ZONA AISLADA en mapa digital alertado equipos manuales en Ã¡rea, requiero autorizaciÃ³n para envÃ­o de vehÃ­culo de inspecciÃ³n, over."</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-critical">
                        <span class="alert-icon">âŒ</span>
                        <div>
                            <strong>Ejemplo INCORRECTO (ambiguo, peligroso):</strong>
                            <p>"Oye, el 215 se quedÃ³ sin seÃ±al por el norte, no sÃ© quÃ© hacer, Â¿lo vemos?"</p>
                            <p><strong>Problemas:</strong> No especifica ubicaciÃ³n exacta, no comunica acciones tomadas, no usa terminologÃ­a estÃ¡ndar, no es profesional.</p>
                        </div>
                    </div>
                    
                    <h3>Escalamiento de ComunicaciÃ³n</h3>
                    <table>
                        <thead>
                            <tr>
                                <th>Severidad</th>
                                <th>Contactar A</th>
                                <th>MÃ©todo</th>
                                <th>Tiempo Max</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="badge badge-low">BAJO</span></td>
                                <td>TÃ©cnico de turno</td>
                                <td>Radio / Sistema</td>
                                <td>30 min</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-medium">MEDIO</span></td>
                                <td>Supervisor operaciones</td>
                                <td>Radio + Llamada</td>
                                <td>10 min</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-high">ALTO</span></td>
                                <td>Gerente + Mantenimiento</td>
                                <td>Llamada directa</td>
                                <td>3 min</td>
                            </tr>
                            <tr>
                                <td><span class="badge badge-critical">CRÃTICO</span></td>
                                <td>TODOS + Emergencias</td>
                                <td>Alerta general</td>
                                <td>30 seg</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h3>ComunicaciÃ³n Bajo EstrÃ©s</h3>
                    <p>Durante una crisis, tu voz y tu mensaje pueden calmar o escalar la situaciÃ³n.</p>
                    
                    <h4>TÃ©cnicas de comunicaciÃ³n efectiva:</h4>
                    <ul>
                        <li><strong>Volumen controlado:</strong> Habla claro pero no grites</li>
                        <li><strong>Ritmo pausado:</strong> Articula cada palabra</li>
                        <li><strong>ConfirmaciÃ³n activa:</strong> "Â¿Confirma recepciÃ³n?" / "Roger that"</li>
                        <li><strong>RepeticiÃ³n crÃ­tica:</strong> Repite informaciÃ³n vital dos veces</li>
                        <li><strong>Sin ambigÃ¼edades:</strong> Usa nÃºmeros, ubicaciones especÃ­ficas</li>
                    </ul>
                    
                    <h3>CÃ³digos de Estado</h3>
                    <div class="code-block">STATUS CODES (usar en reportes):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
CODE GREEN  - OperaciÃ³n normal
CODE YELLOW - Alerta / PrecauciÃ³n
CODE ORANGE - Incidente confirmado
CODE RED    - Emergencia crÃ­tica
CODE BLACK  - EvacuaciÃ³n general
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                </div>
            </section>

            <!-- SECTION 6: DOCUMENTACIÃ“N -->
            <section class="content-section" id="documentacion">
                <div class="card">
                    <h2>ğŸ“ DocumentaciÃ³n Forense de Incidentes</h2>
                    
                    <p>Cada incidente debe ser documentado <strong>COMO SI FUERAS A TESTIFICAR EN JUICIO</strong>.</p>
                    <p>Porque en casos graves, <strong>es exactamente lo que harÃ¡s</strong>.</p>
                    
                    <h3>La BitÃ¡cora Digital del Controlador</h3>
                    <p>Tu registro debe incluir 7 elementos crÃ­ticos:</p>
                    
                    <div class="code-block">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. TIMESTAMP (fecha/hora precisa)            â”‚
â”‚    2024-10-14T03:47:23Z                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 2. IDENTIFICACIÃ“N                             â”‚
â”‚    Truck ID: 207                              â”‚
â”‚    Operator: Sistema AutÃ³nomo                 â”‚
â”‚    Controller: [Tu ID]                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3. TIPO DE FALLA                              â”‚
â”‚    ClasificaciÃ³n: COMM LOSS                   â”‚
â”‚    Severidad: ALTO                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 4. UBICACIÃ“N EXACTA                           â”‚
â”‚    GPS: -23.4567, -68.1234                    â”‚
â”‚    DescripciÃ³n: Km 7.3 Rampa Norte            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 5. ESTADO OPERACIONAL                         â”‚
â”‚    Carga: 385 ton (100%)                      â”‚
â”‚    Velocidad: 22 km/h                         â”‚
â”‚    Pendiente: -8%                             â”‚
â”‚    Destino: Chancadora Primaria               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 6. SECUENCIA DE ACCIONES                      â”‚
â”‚    03:47:23 - PÃ©rdida de comunicaciÃ³n         â”‚
â”‚    03:47:35 - Zona aislada en mapa            â”‚
â”‚    03:47:48 - Alerta a equipos manuales       â”‚
â”‚    03:48:10 - CoordinaciÃ³n con supervisor     â”‚
â”‚    03:49:15 - VehÃ­culo inspecciÃ³n enviado     â”‚
â”‚    03:52:40 - ComunicaciÃ³n restablecida       â”‚
â”‚    03:53:15 - CamiÃ³n en HOLD confirmado       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 7. RESULTADO FINAL                            â”‚
â”‚    ResoluciÃ³n: EXITOSA                        â”‚
â”‚    Tiempo down: 6min 17seg                    â”‚
â”‚    Causa raÃ­z: Interferencia temporal WiFi    â”‚
â”‚    Seguimiento: Reporte a IT para anÃ¡lisis    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>
                    
                    <h3>Reglas de Oro de la DocumentaciÃ³n</h3>
                    
                    <div class="alert alert-warning">
                        <span class="alert-icon">âš ï¸</span>
                        <div>
                            <strong>Regla #1: Si no estÃ¡ documentado, NO SUCEDIÃ“</strong>
                            <p>En investigaciones de incidentes, tu palabra contra el registro digital. El registro siempre gana.</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-info">
                        <span class="alert-icon">ğŸ“‹</span>
                        <div>
                            <strong>Regla #2: Documenta DURANTE, no despuÃ©s</strong>
                            <p>La memoria falla bajo estrÃ©s. Registra mientras sucede, no 2 horas despuÃ©s del turno.</p>
                        </div>
                    </div>
                    
                    <div class="alert alert-success">
                        <span class="alert-icon">âœï¸</span>
                        <div>
                            <strong>Regla #3: Hechos, no opiniones</strong>
                            <p><strong>âœ… Correcto:</strong> "Temperatura motor: 112Â°C (lÃ­mite: 105Â°C)"</p>
                            <p><strong>âŒ Incorrecto:</strong> "El motor estaba sÃºper caliente"</p>
                        </div>
                    </div>
                    
                    <h3>Plantilla de Reporte Post-Incidente</h3>
                    <div class="code-block">REPORTE FORMAL DE INCIDENTE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

SECCIÃ“N A: INFORMACIÃ“N BÃSICA
- Fecha/Hora inicio: 
- Fecha/Hora resoluciÃ³n:
- DuraciÃ³n total:
- Turno:
- Controlador responsable:

SECCIÃ“N B: DESCRIPCIÃ“N DEL INCIDENTE
- Tipo de falla:
- Unidad(es) afectada(s):
- UbicaciÃ³n(es):
- Condiciones ambientales:
- Condiciones operacionales:

SECCIÃ“N C: CRONOLOGÃA DETALLADA
[Timestamp] - [Evento]
[Timestamp] - [AcciÃ³n tomada]
[Timestamp] - [Resultado]

SECCIÃ“N D: ANÃLISIS DE CAUSA RAÃZ
- Causa inmediata:
- Causas contribuyentes:
- Factores ambientales:

SECCIÃ“N E: ACCIONES CORRECTIVAS
- Inmediatas:
- Corto plazo (1 semana):
- Largo plazo (1 mes):

SECCIÃ“N F: LECCIONES APRENDIDAS
- Â¿QuÃ© funcionÃ³ bien?
- Â¿QuÃ© mejorar?
- Â¿Protocolo actualizado necesario?

SECCIÃ“N G: SEGUIMIENTO
- Responsable:
- Fecha revisiÃ³n:
- VerificaciÃ³n implementaciÃ³n:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Firma Digital: ________________
ID Controlador: ________________
Fecha: ________________</div>
                </div>
            </section>

            <!-- SECTION 7: EVALUACIÃ“N -->
            <section class="content-section" id="evaluacion">
                <div id="evaluacionContainer"></div>
            </section>
        </main>
    </div>

    <button class="pdf-download" id="pdfBtn">
        <span>ğŸ“¥</span>
        <span>Descargar PDF</span>
    </button>

    <script>
        const evalData = {
            stage: 'inicio',
            attempt: parseInt(localStorage.getItem('evalAttempt') || '1'),
            timeLeft: 5400,
            timer: null,
            answers: {},
            caseAnswers: {},
            simAnswers: {},
            currentQ: 0
        };
        
        const preguntas = [
            {id:1,p:"Â¿CuÃ¡l es la PRIMERA acciÃ³n que debe realizar un controlador al detectar un incidente crÃ­tico?",o:["Documentar el incidente en el sistema","Detener inmediatamente el vehÃ­culo autÃ³nomo","Comunicar al supervisor de turno","Evaluar si hay riesgo de vida"],c:3},
            {id:2,p:"En el protocolo de seguridad, Â¿quÃ© significa 'PRIORIZA la vida sobre la producciÃ³n'?",o:["Continuar operaciÃ³n con precauciÃ³n","Detener operaciones si existe riesgo humano","Evaluar impacto econÃ³mico primero","Consultar al gerente de operaciones"],c:1},
            {id:3,p:"Â¿QuÃ© tipo de falla requiere la intervenciÃ³n INMEDIATA del controlador?",o:["PÃ©rdida menor de seÃ±al GPS","Falla en sistema de frenado de emergencia","Desgaste normal de neumÃ¡ticos","Lectura errÃ¡tica de temperatura del motor"],c:1},
            {id:4,p:"Durante una pÃ©rdida total de comunicaciÃ³n, el camiÃ³n autÃ³nomo debe:",o:["Continuar hacia el destino programado","Activar protocolo de detenciÃ³n segura inmediata","Reducir velocidad y esperar reconexiÃ³n","Regresar al punto de origen"],c:1},
            {id:5,p:"Â¿CuÃ¡l es el tiempo mÃ¡ximo para reportar un incidente crÃ­tico?",o:["30 segundos","2 minutos","5 minutos","10 minutos"],c:0},
            {id:6,p:"En caso de detectar humo en el compartimiento del motor, la acciÃ³n correcta es:",o:["Monitorear y continuar operaciÃ³n","DetenciÃ³n inmediata y activar supresiÃ³n de fuego","Reducir carga del motor gradualmente","Enviar unidad al taller al final del turno"],c:1},
            {id:7,p:"El cÃ³digo de falla 'E-BRAKE-01' indica:",o:["Falla menor en sensor de freno","Sistema de frenado comprometido - DETENER","Necesita mantenimiento preventivo","CalibraciÃ³n de frenos requerida"],c:1},
            {id:8,p:"Â¿QuÃ© informaciÃ³n es CRÃTICA documentar durante un incidente?",o:["Solo la hora del evento","Hora, ubicaciÃ³n GPS, testigos y acciones tomadas","Nombre del supervisor Ãºnicamente","Condiciones climÃ¡ticas del dÃ­a"],c:1},
            {id:9,p:"Un camiÃ³n reporta 'Obstacle Detection Alert'. Â¿QuÃ© debe hacer el controlador?",o:["Ignorar si el camiÃ³n continÃºa moviÃ©ndose","Verificar cÃ¡maras, evaluar obstÃ¡culo y decidir acciÃ³n","Reiniciar sistema de detecciÃ³n","Cambiar ruta automÃ¡ticamente"],c:1},
            {id:10,p:"La telemetrÃ­a muestra presiÃ³n de neumÃ¡tico 30% bajo lo normal. AcciÃ³n correcta:",o:["Completar el ciclo actual de acarreo","Detener unidad y solicitar inspecciÃ³n inmediata","Reducir velocidad mÃ¡xima en 10%","Programar revisiÃ³n para prÃ³ximo turno"],c:1},
            {id:11,p:"Â¿CuÃ¡ndo se debe activar el protocolo de evacuaciÃ³n del Ã¡rea?",o:["Solo si hay heridos confirmados","Ante riesgo inminente de explosiÃ³n, incendio o derrumbe","Cuando el supervisor lo autorice","DespuÃ©s de documentar el incidente"],c:1},
            {id:12,p:"El sistema muestra 'Loss of Autonomy - Manual Override Required'. Esto significa:",o:["El camiÃ³n cambiÃ³ a modo semi-autÃ³nomo","Control remoto manual es necesario AHORA","Sistema se reiniciarÃ¡ automÃ¡ticamente","Falla menor corregible en ruta"],c:1},
            {id:13,p:"Durante condiciones de baja visibilidad (neblina densa), el controlador debe:",o:["Aumentar separaciÃ³n entre vehÃ­culos y reducir velocidad","Continuar operaciÃ³n normal","Solo usar cÃ¡maras tÃ©rmicas","Detener solo camiones cargados"],c:0},
            {id:14,p:"Â¿QuÃ© indica una alerta de 'Collision Avoidance System Fault'?",o:["Sistema preventivo deshabilitado - ALTO RIESGO","RecalibraciÃ³n menor requerida","Modo de respaldo activado","ActualizaciÃ³n de software pendiente"],c:0},
            {id:15,p:"En el protocolo 'COMUNICA claramente', la regla es:",o:["Usar jerga tÃ©cnica para precisiÃ³n","Lenguaje claro, conciso y confirmar entendimiento","Solo reportar a supervisor directo","Enviar email detallado despuÃ©s"],c:1},
            {id:16,p:"Un trabajador estÃ¡ en zona de riesgo no autorizada. El controlador debe:",o:["Tocar bocina del camiÃ³n autÃ³nomo","DETENER todos los vehÃ­culos en Ã¡rea, alertar seguridad","Reducir velocidad de camiones cercanos","Notificar por radio al trabajador"],c:1},
            {id:17,p:"La temperatura del sistema hidrÃ¡ulico supera 95Â°C (lÃ­mite: 85Â°C). AcciÃ³n:",o:["Monitorear prÃ³ximos 10 minutos","Detener unidad inmediatamente - riesgo de falla catastrÃ³fica","Activar enfriamiento adicional","Reducir carga de trabajo del sistema"],c:1},
            {id:18,p:"Â¿QuÃ© significa 'documentar TODO' en gestiÃ³n de incidentes?",o:["Solo llenar formulario oficial","Registrar causas, acciones, testigos, evidencia y seguimiento","Tomar fotografÃ­as del Ã¡rea","Anotar en bitÃ¡cora personal"],c:1},
            {id:19,p:"Durante un sismo, el protocolo de camiones autÃ³nomos es:",o:["Continuar hacia zona segura mÃ¡s cercana","DetenciÃ³n automÃ¡tica, luces de emergencia, esperar inspecciÃ³n","Aumentar velocidad para salir del Ã¡rea","Estacionar en berma inmediatamente"],c:1},
            {id:20,p:"El 'log' de eventos del sistema muestra 47 reconexiones en 10 minutos. Esto indica:",o:["OperaciÃ³n normal en zona de cobertura dÃ©bil","Falla crÃ­tica en sistema de comunicaciones - investigar","Interferencia electromagnÃ©tica menor","ActualizaciÃ³n de red en proceso"],c:1},
            {id:21,p:"Â¿CuÃ¡l es la distancia mÃ­nima de seguridad entre un camiÃ³n autÃ³nomo y vehÃ­culos tripulados?",o:["10 metros","25 metros","50 metros","100 metros"],c:2},
            {id:22,p:"Un camiÃ³n muestra 'Battery Low - 15% Remaining'. El controlador debe:",o:["Completar viaje actual","Enviar a estaciÃ³n de carga inmediatamente","Reducir consumo energÃ©tico","Cambiar a modo eco"],c:1},
            {id:23,p:"El principio 'PIENSA antes de actuar' se refiere a:",o:["Consultar el manual antes de cada acciÃ³n","Evaluar consecuencias, riesgos y alternativas antes de decidir","Pedir autorizaciÃ³n al supervisor","Documentar el plan de acciÃ³n"],c:1},
            {id:24,p:"Â¿QuÃ© acciÃ³n NO es apropiada durante un incidente crÃ­tico?",o:["Activar protocolo de emergencia","Intentar reparar el equipo remotamente durante la crisis","Comunicar a todas las partes relevantes","Asegurar el Ã¡rea de riesgo"],c:1},
            {id:25,p:"La alerta 'Tire Pressure Critical - Front Left' requiere:",o:["Monitoreo cada 5 minutos","DetenciÃ³n inmediata - riesgo de volcamiento","Reducir velocidad a 15 km/h","Completar descarga y luego revisar"],c:1},
            {id:26,p:"Â¿CuÃ¡ntos controladores deben estar certificados por turno para operar la flota?",o:["MÃ­nimo 1 controlador principal","MÃ­nimo 2 controladores certificados","Depende del nÃºmero de camiones","Solo se requiere un supervisor"],c:1},
            {id:27,p:"El sistema de gestiÃ³n muestra 'Path Planning Error'. Esto significa:",o:["Ruta alternativa calculÃ¡ndose","Sistema no puede calcular ruta segura - requiere intervenciÃ³n","ActualizaciÃ³n de mapas necesaria","GPS en recalibraciÃ³n"],c:1},
            {id:28,p:"En una falla de sistema de iluminaciÃ³n nocturna, el controlador debe:",o:["Activar luces auxiliares","DETENER operaciÃ³n - visibilidad comprometida = PELIGRO","Reducir velocidad 50%","Operar solo en Ã¡reas bien iluminadas"],c:1},
            {id:29,p:"Â¿QuÃ© informaciÃ³n NO es necesaria en el reporte inicial de incidente?",o:["AnÃ¡lisis detallado de causas raÃ­z","Hora y ubicaciÃ³n exacta","Acciones inmediatas tomadas","Recursos de emergencia activados"],c:0},
            {id:30,p:"La frase 'Eres el Ãºltimo eslabÃ³n de seguridad' significa:",o:["Tienes responsabilidad legal Ãºnica","Tu decisiÃ³n puede salvar vidas - confÃ­a en tu criterio","Debes seguir solo procedimientos escritos","Eres responsable de todas las fallas"],c:1}
        ];
        
        const casos = [
            {id:1,t:"Caso 1: PÃ©rdida de ComunicaciÃ³n en Zona CrÃ­tica",d:"Un camiÃ³n CAT 794 AC cargado (385 toneladas) pierde comunicaciÃ³n total mientras desciende por rampa con 12% de pendiente. El sistema muestra Ãºltima posiciÃ³n a 450m de una intersecciÃ³n de alto trÃ¡fico. CÃ¡maras muestran velocidad: 28 km/h. Han pasado 45 segundos sin seÃ±al.",p:"Describe paso a paso las acciones que tomarÃ­as en los prÃ³ximos 60 segundos. Justifica cada decisiÃ³n (mÃ­nimo 150 caracteres)",min:150},
            {id:2,t:"Caso 2: DetecciÃ³n de Humo en Compartimiento Motor",d:"A las 02:35 AM, sensor de humo del camiÃ³n AU-47 se activa. CÃ¡mara tÃ©rmica muestra temperatura anormal (178Â°C) en zona del motor. El camiÃ³n estÃ¡ vacÃ­o, a 2.3 km del taller, en zona remota sin personal cercano. Viento: 35 km/h hacia zona de almacenamiento de combustible (850m de distancia).",p:"Â¿CuÃ¡l es tu secuencia de acciones? Â¿QuÃ© factores consideras crÃ­ticos? Â¿A quiÃ©n alertas y en quÃ© orden? (mÃ­nimo 150 caracteres)",min:150},
            {id:3,t:"Caso 3: Trabajador en Zona No Autorizada",d:"Sistema de detecciÃ³n alerta sobre persona a pie dentro del Ã¡rea operacional de camiones autÃ³nomos. CÃ¡maras confirman: trabajador con chaleco, aparentemente desorientado, estÃ¡ a 85 metros de la trayectoria del camiÃ³n AU-23 (cargado, velocidad 22 km/h, 12 segundos para punto mÃ¡s cercano). Otro camiÃ³n (AU-31) se aproxima desde direcciÃ³n opuesta a 180 metros.",p:"Gestiona esta emergencia. Explica cada comando que darÃ­as y el razonamiento temporal (mÃ­nimo 150 caracteres)",min:150},
            {id:4,t:"Caso 4: Falla MÃºltiple de Sistemas",d:"CamiÃ³n AU-12 reporta simultÃ¡neamente: 1) Falla en sistema de frenos (presiÃ³n hidrÃ¡ulica 40%), 2) Sensor de proximidad frontal inoperativo, 3) CÃ¡mara principal con interferencia. El camiÃ³n estÃ¡ CARGADO en zona de alta pendiente. Velocidad actual: 18 km/h. Distancia a zona plana: 380 metros. Tiempo estimado: 75 segundos.",p:"Describe tu anÃ¡lisis de riesgos y las acciones que tomarÃ­as. Â¿UsarÃ­as control manual remoto? Â¿Por quÃ© sÃ­ o no? (mÃ­nimo 150 caracteres)",min:150},
            {id:5,t:"Caso 5: DecisiÃ³n Bajo PresiÃ³n de ProducciÃ³n",d:"Es el Ãºltimo dÃ­a del mes. La meta de producciÃ³n requiere 8 viajes mÃ¡s. Quedan 3 horas de turno. El camiÃ³n AU-09 muestra una alerta: 'CHECK ENGINE - Code P2563'. El sistema permite continuar operaciÃ³n con monitoreo. El gerente de operaciones te llama: 'Necesitamos esos 8 viajes'. Tu supervisor tÃ©cnico dice: 'Es tu decisiÃ³n'. El manual indica: 'Evaluar criticidad del cÃ³digo'.",p:"Â¿CuÃ¡l es tu decisiÃ³n y cÃ³mo la justificas? Â¿QuÃ© principio del protocolo de seguridad aplica aquÃ­? (mÃ­nimo 150 caracteres)",min:150}
        ];
        
        const sims = [
            {id:1,t:"SimulaciÃ³n 1: Respuesta RÃ¡pida a ColisiÃ³n Inminente",e:"âš ï¸ ALERTA CRÃTICA: CamiÃ³n AU-15 detecta vehÃ­culo liviano NO AUTORIZADO cruzando su trayectoria. Distancia: 45 metros. Velocidad camiÃ³n: 25 km/h. Tiempo estimado de impacto: 6 segundos. Sistema requiere decisiÃ³n inmediata.",o:["A) Activar frenado de emergencia automÃ¡tico + bocina","B) Intentar maniobra evasiva controlada remotamente","C) Confiar en que el vehÃ­culo liviano acelerarÃ¡ y saldrÃ¡","D) Reducir velocidad gradualmente"],c:0},
            {id:2,t:"SimulaciÃ³n 2: GestiÃ³n de Falla en Cadena",e:"ğŸ”´ CRISIS ESCALANDO: 1) CamiÃ³n AU-22 pierde GPS (00:00). 2) Sistema de visiÃ³n reporta falla (00:23). 3) ComunicaciÃ³n intermitente cada 8 segundos (00:45). 4) CamiÃ³n estÃ¡ a 150m de bifurcaciÃ³n crÃ­tica (01:00). Â¿QuÃ© haces AHORA?",o:["A) Activar protocolo DETENCIÃ“N SEGURA INMEDIATA","B) Intentar guiar por Ãºltima posiciÃ³n conocida","C) Esperar a que el camiÃ³n se detenga solo en zona segura","D) Enviar tÃ©cnico al terreno para control manual"],c:0},
            {id:3,t:"SimulaciÃ³n 3: Toma de DecisiÃ³n Ã‰tica",e:"â±ï¸ DILEMA: Detectas que camiÃ³n AU-31 tiene micro-fisura en estructura (reportada por IA predictivo). Riesgo: 2% de falla catastrÃ³fica. InspecciÃ³n visual requiere 4 horas. ProducciÃ³n: 12 viajes pendientes crÃ­ticos. PresiÃ³n: ALTA. Tu decisiÃ³n afecta: seguridad vs. cumplimiento de meta.",o:["A) DETENER unidad para inspecciÃ³n - seguridad primero","B) Completar turno y revisar en mantenciÃ³n programada","C) Reducir carga 20% y monitorear constantemente","D) Consultar con 2 supervisores antes de decidir"],c:0}
        ];
        
        function fmtTime(s){const m=Math.floor(s/60);return `${m}:${(s%60).toString().padStart(2,'0')}`;}
        
        function startTimer(){
            if(evalData.timer) clearInterval(evalData.timer);
            evalData.timer=setInterval(()=>{
                evalData.timeLeft--;
                const t=document.getElementById('evalTimer');
                if(t) t.textContent=fmtTime(evalData.timeLeft);
                if(evalData.timeLeft<=0){clearInterval(evalData.timer);finalizarEval();}
            },1000);
        }
        
        function loadEval(){
            const c=document.getElementById('evaluacionContainer');
            if(evalData.stage==='inicio'){
                c.innerHTML=`
                    <div class="card">
                        <div style="background: linear-gradient(135deg, #FF6B35, #c94d29); padding: 40px; border-radius: 16px; margin-bottom: 30px; text-align: center;">
                            <h1 style="color: white; font-size: 36px; margin: 0;">ğŸ¯ EvaluaciÃ³n Final MÃ³dulo 5</h1>
                            <p style="color: rgba(255,255,255,0.9); font-size: 18px; margin: 10px 0 0 0;">GestiÃ³n de Incidentes y Emergencias</p>
                        </div>
                        
                        <div class="alert alert-info">
                            <span class="alert-icon">ğŸ“‹</span>
                            <div>
                                <strong>Estructura Completa:</strong>
                                <ul style="margin: 10px 0 0 0;">
                                    <li><strong>Parte 1 (70%):</strong> 30 preguntas teÃ³ricas + 5 casos de estudio</li>
                                    <li><strong>Parte 2 (30%):</strong> 3 simulaciones prÃ¡cticas</li>
                                    <li><strong>DuraciÃ³n:</strong> 90 minutos</li>
                                    <li><strong>AprobaciÃ³n mÃ­nima:</strong> 80%</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="alert alert-warning">
                            <span class="alert-icon">âš ï¸</span>
                            <div>
                                <strong>InformaciÃ³n Importante:</strong>
                                <ul style="margin: 10px 0 0 0;">
                                    <li>Intento <strong>${evalData.attempt} de 2</strong></li>
                                    <li>No se puede pausar la evaluaciÃ³n</li>
                                    <li>Guarda automÃ¡ticamente al finalizar tiempo</li>
                                    <li>Casos requieren mÃ­nimo 150 caracteres cada uno</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="alert alert-success">
                            <span class="alert-icon">ğŸ’¡</span>
                            <div>
                                <strong>Recuerda el Protocolo:</strong>
                                <p style="margin: 5px 0 0 0; font-size: 16px;">ğŸ§  <strong>PIENSA</strong> â€¢ ğŸ“ <strong>COMUNICA</strong> â€¢ ğŸ“ <strong>DOCUMENTA</strong> â€¢ ğŸ¯ <strong>PRIORIZA</strong> la vida</p>
                            </div>
                        </div>
                        
                        <button class="btn-primary" style="width: 100%; padding: 20px; font-size: 18px;" onclick="iniciarEval()" ${evalData.attempt>2?'disabled':''}>
                            ${evalData.attempt>2?'âŒ No hay mÃ¡s intentos disponibles':'ğŸš€ INICIAR EVALUACIÃ“N FINAL'}
                        </button>
                    </div>
                `;
            }
        }
        
        function iniciarEval(){
            evalData.stage='teorico';
            evalData.currentQ=0;
            evalData.answers={};
            evalData.caseAnswers={};
            evalData.simAnswers={};
            evalData.timeLeft=5400;
            startTimer();
            mostrarPregunta();
        }
        
        function mostrarPregunta(){
            const c=document.getElementById('evaluacionContainer');
            const q=preguntas[evalData.currentQ];
            const prog=((evalData.currentQ+1)/preguntas.length)*100;
            
            c.innerHTML=`
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding: 20px; background: rgba(26,31,58,0.6); border-radius: 12px;">
                        <div style="flex: 1;">
                            <p style="color: var(--text-secondary); margin: 0;">Pregunta ${evalData.currentQ+1} de ${preguntas.length}</p>
                            <div class="eval-progress-bar"><div class="eval-progress-fill" style="width: ${prog}%"></div></div>
                        </div>
                        <div class="eval-timer" style="margin-left: 20px;"><span>â±ï¸</span><span id="evalTimer">${fmtTime(evalData.timeLeft)}</span></div>
                    </div>
                    
                    <div class="question-card">
                        <h2 style="color: var(--primary); margin-bottom: 30px;">${q.p}</h2>
                        <div style="display: flex; flex-direction: column; gap: 15px;">
                            ${q.o.map((op,i)=>`
                                <button class="option-btn ${evalData.answers[q.id]===i?'selected':''}" onclick="selResp(${q.id},${i})">
                                    <span style="color: var(--primary); font-weight: bold; margin-right: 10px;">${String.fromCharCode(65+i)})</span>
                                    ${op}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        ${evalData.currentQ>0?`<button class="btn-secondary" onclick="anteriorPreg()">â† Anterior</button>`:''}
                        ${evalData.currentQ<preguntas.length-1?`
                            <button class="btn-primary" style="flex: 1;" onclick="siguientePreg()" ${evalData.answers[q.id]===undefined?'disabled':''}>
                                Siguiente â†’
                            </button>
                        `:`
                            <button class="btn-primary" style="flex: 1; background: linear-gradient(135deg, #00D9A5, #00a077);" onclick="mostrarCasos()" ${Object.keys(evalData.answers).length!==preguntas.length?'disabled':''}>
                                Continuar a Casos de Estudio â†’
                            </button>
                        `}
                    </div>
                </div>
            `;
        }
        
        function selResp(qid,idx){evalData.answers[qid]=idx;mostrarPregunta();}
        function anteriorPreg(){evalData.currentQ--;mostrarPregunta();}
        function siguientePreg(){evalData.currentQ++;mostrarPregunta();}
        
        function validarCasos(){
            let todosValidos = true;
            casos.forEach(caso => {
                const respuesta = evalData.caseAnswers[caso.id] || '';
                if(respuesta.trim().length < caso.min) todosValidos = false;
            });
            return todosValidos;
        }
        
        function mostrarCasos(){
            const c=document.getElementById('evaluacionContainer');
            c.innerHTML=`
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding: 20px; background: rgba(26,31,58,0.6); border-radius: 12px;">
                        <h2 style="margin: 0;">ğŸ“‹ Casos de Estudio</h2>
                        <div class="eval-timer"><span>â±ï¸</span><span id="evalTimer">${fmtTime(evalData.timeLeft)}</span></div>
                    </div>
                    
                    ${casos.map(caso=>{
                        const chars = (evalData.caseAnswers[caso.id] || '').length;
                        const isValid = chars >= caso.min;
                        return `
                        <div class="question-card" style="margin-bottom: 30px;">
                            <h3 style="color: var(--primary);">${caso.t}</h3>
                            <div class="alert alert-critical"><span class="alert-icon">ğŸ”´</span><div><strong>Escenario:</strong> ${caso.d}</div></div>
                            <p style="color: var(--accent); font-weight: bold; margin-bottom: 15px;">ğŸ“ ${caso.p}</p>
                            <textarea 
                                id="caso${caso.id}"
                                placeholder="Escribe tu respuesta detallada aquÃ­ (mÃ­nimo ${caso.min} caracteres)..." 
                                oninput="guardarCaso(${caso.id}, this.value)"
                                style="min-height: 200px; ${!isValid && chars > 0 ? 'border-color: var(--danger);' : ''}">${evalData.caseAnswers[caso.id] || ''}</textarea>
                            <div class="char-counter">
                                <span style="color: ${isValid ? 'var(--success)' : 'var(--danger)'}">${chars}/${caso.min} caracteres</span>
                                ${isValid ? ' âœ“' : ' (faltan ' + (caso.min - chars) + ')'}
                            </div>
                        </div>
                    `}).join('')}
                    
                    <div class="alert alert-info">
                        <span class="alert-icon">ğŸ’¡</span>
                        <div>
                            <strong>Tip:</strong> Describe paso a paso tus acciones, justifica cada decisiÃ³n y menciona factores de seguridad.
                        </div>
                    </div>
                    
                    <button class="btn-primary" style="width: 100%; padding: 20px; font-size: 18px; background: linear-gradient(135deg, #8A2BE2, #6a1bb2);" 
                            onclick="mostrarSims()" id="btnContinuarSims"
                            ${!validarCasos() ? 'disabled' : ''}>
                        Continuar a Simulaciones â†’
                    </button>
                </div>
            `;
        }
        
        function guardarCaso(id, val){
            evalData.caseAnswers[id] = val;
            const btn = document.getElementById('btnContinuarSims');
            if(btn) btn.disabled = !validarCasos();
            const caso = casos.find(c => c.id === id);
            if(caso){
                const counter = document.querySelector(`#caso${id} + .char-counter`);
                if(counter){
                    const chars = val.length;
                    const isValid = chars >= caso.min;
                    counter.innerHTML = `
                        <span style="color: ${isValid ? 'var(--success)' : 'var(--danger)'}">${chars}/${caso.min} caracteres</span>
                        ${isValid ? ' âœ“' : ' (faltan ' + (caso.min - chars) + ')'}
                    `;
                }
            }
        }
        
        function mostrarSims(){
            const c=document.getElementById('evaluacionContainer');
            c.innerHTML=`
                <div class="card">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; padding: 20px; background: rgba(138,43,226,0.2); border-radius: 12px;">
                        <h2 style="margin: 0; display: flex; align-items: center; gap: 10px;"><span>ğŸ®</span><span>Simulaciones PrÃ¡cticas</span></h2>
                        <div class="eval-timer"><span>â±ï¸</span><span id="evalTimer">${fmtTime(evalData.timeLeft)}</span></div>
                    </div>
                    
                    ${sims.map(sim=>`
                        <div class="question-card" style="border: 2px solid var(--danger); margin-bottom: 30px;">
                            <h3 style="color: #8A2BE2;">${sim.t}</h3>
                            <div style="background: rgba(255,82,82,0.2); border: 2px solid var(--danger); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                                <p style="color: white; font-weight: 600; margin: 0;">${sim.e}</p>
                            </div>
                            <p style="color: var(--warning); font-weight: bold; margin-bottom: 20px;">â±ï¸ DecisiÃ³n bajo presiÃ³n: elige la mejor opciÃ³n</p>
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                ${sim.o.map((op,i)=>`
                                    <button class="option-btn ${evalData.simAnswers[sim.id]===i?'selected':''}" onclick="selSim(${sim.id},${i})">${op}</button>
                                `).join('')}
                            </div>
                        </div>
                    `).join('')}
                    
                    <button class="btn-primary" style="width: 100%; padding: 20px; font-size: 18px; background: linear-gradient(135deg, #00D9A5, #00a077);" 
                            onclick="finalizarEval()"
                            ${Object.keys(evalData.simAnswers).length!==sims.length?'disabled':''}>
                        ğŸ FINALIZAR EVALUACIÃ“N
                    </button>
                </div>
            `;
        }
        
        function selSim(id,idx){evalData.simAnswers[id]=idx;mostrarSims();}
        
        function calcScore(){
            let corr=0;
            preguntas.forEach(q=>{if(evalData.answers[q.id]===q.c)corr++;});
            const tScore=(corr/preguntas.length)*100;
            const cScore=(Object.keys(evalData.caseAnswers).length/casos.length)*100;
            const p1=(tScore*0.7+cScore*0.3);
            let simCorr=0;
            sims.forEach(s=>{if(evalData.simAnswers[s.id]===s.c)simCorr++;});
            const p2=(simCorr/sims.length)*100;
            const final=(p1*0.7+p2*0.3);
            return {final,p1,p2,tScore,cScore,corr,total:preguntas.length,simCorr,simTotal:sims.length};
        }
        
        function finalizarEval(){
            clearInterval(evalData.timer);
            const sc=calcScore();
            const apr=sc.final>=80;
            
            const c=document.getElementById('evaluacionContainer');
            c.innerHTML=`
                <div class="card">
                    <div style="background: ${apr?'linear-gradient(135deg, #00D9A5, #00a077)':'linear-gradient(135deg, #FF5252, #c94029)'}; padding: 40px; border-radius: 16px; text-align: center; margin-bottom: 30px;">
                        <div style="font-size: 80px; margin-bottom: 20px;">${apr?'âœ…':'âŒ'}</div>
                        <h1 style="color: white; font-size: 48px; margin: 0;">${apr?'Â¡APROBADO!':'NO APROBADO'}</h1>
                        <p style="color: rgba(255,255,255,0.9); font-size: 20px; margin: 10px 0 0 0;">
                            ${apr?'Felicitaciones, eres un controlador certificado':'Necesitas mejorar en algunas Ã¡reas'}
                        </p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-bottom: 40px;">
                        <div style="background: rgba(255, 107, 53, 0.1); padding: 30px; border-radius: 16px; text-align: center;">
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">Nota Final</p>
                            <div class="score-display">${sc.final.toFixed(1)}%</div>
                        </div>
                        <div style="background: rgba(66, 165, 245, 0.1); padding: 30px; border-radius: 16px; text-align: center;">
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">Requerido</p>
                            <div class="score-display" style="color: var(--info);">80%</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 30px;">
                        <div style="background: rgba(26,31,58,0.6); padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                <span>Parte 1: TeÃ³rico (70%)</span>
                                <span style="font-weight: bold; color: var(--info);">${sc.p1.toFixed(1)}%</span>
                            </div>
                            <div style="width: 100%; height: 12px; background: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden;">
                                <div style="height: 100%; background: linear-gradient(90deg, #42A5F5, #1976D2); width: ${sc.p1}%; transition: width 1s ease;"></div>
                            </div>
                            <p style="margin-top: 15px; color: var(--text-secondary); font-size: 14px;">
                                Preguntas correctas: ${sc.corr}/${sc.total} | Casos completados: ${Object.keys(evalData.caseAnswers).length}/${casos.length}
                            </p>
                        </div>
                        
                        <div style="background: rgba(26,31,58,0.6); padding: 25px; border-radius: 12px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 15px;">
                                <span>Parte 2: Simulaciones (30%)</span>
                                <span style="font-weight: bold; color: #8A2BE2;">${sc.p2.toFixed(1)}%</span>
                            </div>
                            <div style="width: 100%; height: 12px; background: rgba(255,255,255,0.1); border-radius: 6px; overflow: hidden;">
                                <div style="height: 100%; background: linear-gradient(90deg, #8A2BE2, #6a1bb2); width: ${sc.p2}%; transition: width 1s ease;"></div>
                            </div>
                            <p style="margin-top: 15px; color: var(--text-secondary); font-size: 14px;">
                                Simulaciones correctas: ${sc.simCorr}/${sc.simTotal}
                            </p>
                        </div>
                    </div>
                    
                    ${apr?`
                        <div class="alert alert-success">
                            <span class="alert-icon">ğŸ‰</span>
                            <div>
                                <strong>Â¡Excelente trabajo!</strong>
                                <p style="margin: 10px 0;">Has completado exitosamente el mÃ³dulo mÃ¡s exigente del curso.</p>
                                <div style="background: rgba(26,31,58,0.6); padding: 20px; border-radius: 12px; margin-top: 15px;">
                                    <p style="font-weight: bold; color: var(--primary); margin-bottom: 10px;">Recuerda siempre:</p>
                                    <p style="margin: 5px 0;">ğŸ§  <strong>PIENSA</strong> antes de actuar</p>
                                    <p style="margin: 5px 0;">ğŸ“ <strong>COMUNICA</strong> claramente</p>
                                    <p style="margin: 5px 0;">ğŸ“ <strong>DOCUMENTA</strong> todo</p>
                                    <p style="margin: 5px 0;">ğŸ¯ <strong>PRIORIZA</strong> la vida sobre la producciÃ³n</p>
                                    <p style="margin-top: 15px; text-align: center; font-size: 18px; font-weight: bold; color: var(--primary);">
                                        Eres el Ãºltimo eslabÃ³n de seguridad. La mina confÃ­a en ti.
                                    </p>
                                </div>
                            </div>
                        </div>
                    `:`
                        <div class="alert alert-warning">
                            <span class="alert-icon">ğŸ“š</span>
                            <div>
                                <strong>Ãreas de Mejora:</strong>
                                <ul style="margin: 10px 0 0 0;">
                                    ${sc.tScore<80?'<li>Revisar protocolos de gestiÃ³n de incidentes</li>':''}
                                    ${sc.cScore<80?'<li>Practicar anÃ¡lisis de casos crÃ­ticos con mÃ¡s detalle</li>':''}
                                    ${sc.p2<80?'<li>Mejorar toma de decisiones bajo presiÃ³n</li>':''}
                                </ul>
                            </div>
                        </div>
                    `}
                    
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        ${!apr&&evalData.attempt<2?`
                            <button class="btn-primary" style="flex: 1;" onclick="reintentar()">
                                ğŸ”„ REINTENTAR (Intento ${evalData.attempt+1} de 2)
                            </button>
                        `:''}
                        ${apr?`
                            <button class="btn-primary" style="flex: 1; background: linear-gradient(135deg, var(--secondary), #003a6f);" onclick="descargarCert()">
                                ğŸ“„ DESCARGAR CERTIFICADO
                            </button>
                        `:''}
                    </div>
                </div>
            `;
            
            localStorage.setItem('evalScore',JSON.stringify(sc));
            localStorage.setItem('evalAprobado',apr);
        }
        
        function reintentar(){
            evalData.attempt++;
            localStorage.setItem('evalAttempt',evalData.attempt);
            evalData.stage='inicio';
            loadEval();
        }
        
        function descargarCert(){
            const sc=JSON.parse(localStorage.getItem('evalScore'));
            const fecha = new Date().toLocaleDateString('es-ES', {year: 'numeric', month: 'long', day: 'numeric'});
            const cert=`
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            CERTIFICADO DE APROBACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                  MÃ“DULO 5
    GestiÃ³n de Incidentes y Emergencias
  Sistema de Camiones AutÃ³nomos Mineros

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Se certifica que el participante ha completado
exitosamente el MÃ³dulo 5 del programa de formaciÃ³n
de Controlador de Terreno.

Nota Final: ${sc.final.toFixed(1)}%
Fecha de CertificaciÃ³n: ${fecha}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Competencias Certificadas:
âœ“ GestiÃ³n de incidentes crÃ­ticos en sistemas autÃ³nomos
âœ“ Toma de decisiones bajo presiÃ³n extrema
âœ“ ComunicaciÃ³n efectiva en situaciones de crisis
âœ“ DocumentaciÃ³n forense de incidentes
âœ“ AplicaciÃ³n de protocolos de seguridad

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

         "Eres el Ãºltimo eslabÃ³n de seguridad.
                La mina confÃ­a en ti."

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            `;
            
            const blob=new Blob([cert],{type:'text/plain;charset=utf-8'});
            const url=URL.createObjectURL(blob);
            const a=document.createElement('a');
            a.href=url;
            a.download='Certificado_Modulo5_'+new Date().toISOString().split('T')[0]+'.txt';
            a.click();
            URL.revokeObjectURL(url);
        }
        
        // NAVEGACIÃ“N
        const navItems=document.querySelectorAll('.nav-item');
        const contentSections=document.querySelectorAll('.content-section');
        const mainContent=document.getElementById('mainContent');
        
        navItems.forEach(item=>{
            item.addEventListener('click',()=>{
                const target=item.dataset.section;
                navItems.forEach(n=>n.classList.remove('active'));
                item.classList.add('active');
                contentSections.forEach(s=>s.classList.remove('active'));
                document.getElementById(target).classList.add('active');
                mainContent.scrollTop=0;
                item.classList.add('completed');
                item.querySelector('.nav-check').textContent='âœ“';
                updateProgress();
                saveProgress();
                if(target==='evaluacion') loadEval();
            });
        });
        
        document.addEventListener('click',(e)=>{
            if(e.target.closest('.accordion-header')){
                e.target.closest('.accordion-item').classList.toggle('active');
            }
        });
        
        function updateProgress(){
            const total=navItems.length;
            const comp=document.querySelectorAll('.nav-item.completed').length;
            const pct=Math.round((comp/total)*100);
            const ring=document.querySelector('.progress-ring');
            const txt=document.querySelector('.progress-text');
            const circ=2*Math.PI*20;
            const offset=circ-(pct/100)*circ;
            ring.style.strokeDashoffset=offset;
            txt.textContent=pct+'%';
        }
        
        function saveProgress(){
            const comp=Array.from(navItems).map((it,i)=>it.classList.contains('completed')?i:null).filter(i=>i!==null);
            localStorage.setItem('moduleProgress',JSON.stringify(comp));
        }
        
        function loadProgress(){
            const saved=localStorage.getItem('moduleProgress');
            if(saved){
                JSON.parse(saved).forEach(i=>{
                    if(navItems[i]){
                        navItems[i].classList.add('completed');
                        navItems[i].querySelector('.nav-check').textContent='âœ“';
                    }
                });
                updateProgress();
            }
        }
        
        // PDF
        document.getElementById('pdfBtn').addEventListener('click',async()=>{
            const btn=document.getElementById('pdfBtn');
            btn.classList.add('generating');
            btn.innerHTML='<span>â³</span><span>Generando...</span>';
            try{
                const {jsPDF}=window.jspdf;
                const pdf=new jsPDF();
                pdf.setFontSize(16);
                pdf.text('MÃ³dulo 5: GestiÃ³n de Incidentes',20,20);
                pdf.setFontSize(12);
                pdf.text('Sistema de Camiones AutÃ³nomos Mineros',20,30);
                pdf.text('Fecha: '+new Date().toLocaleDateString(),20,40);
                pdf.save('Modulo5_'+new Date().toISOString().split('T')[0]+'.pdf');
                btn.innerHTML='<span>âœ…</span><span>Â¡Descargado!</span>';
                setTimeout(()=>{
                    btn.classList.remove('generating');
                    btn.innerHTML='<span>ğŸ“¥</span><span>Descargar PDF</span>';
                },3000);
            }catch(e){
                btn.classList.remove('generating');
                btn.innerHTML='<span>âŒ</span><span>Error</span>';
                setTimeout(()=>{
                    btn.innerHTML='<span>ğŸ“¥</span><span>Descargar PDF</span>';
                },3000);
            }
        });
        
        loadProgress();
        updateProgress();
    </script>
</body>
</html>